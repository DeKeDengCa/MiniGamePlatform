syntax = "proto3";

package svr.privilege;

import "protobuf/api/privilege/v2/privilege.proto";

option go_package = "gitit.cc/social/protobuf/gencode/svr/pbsprivilege";

// smicro:spath=gitit.cc/social/components-service/social-privilege/biz/prettynumber/handlersvr

service PrettyNumberSvr {
  // 批量查询靓号
  rpc BatchGetPrettyNumber(BatchGetPrettyNumberReq) returns (BatchGetPrettyNumberRsp);

  // 批量查询靓号
  rpc BatchGetPrettyNumberByID(BatchGetPrettyNumberByIDReq) returns (BatchGetPrettyNumberByIDRsp);

  // 靓号绑定
  rpc BindPrettyNumber(BindPrettyNumberReq) returns (BindPrettyNumberRsp);
}

message PrettyNumber {
  int64 id = 1;
  int64 owner_uid = 2; // 靓号拥有者uid
  string show_id = 3; // 靓号号码
  api.privilege.v2.TargetType target_type = 4; // 归属类型
  int64 target_id = 5; //归属目标id
  api.privilege.v2.PrettyNumber assets = 6; //资源
  int64 expired_at = 7; // 过期时间戳-秒(-1:永久)
  api.privilege.v2.PrettyNumberUseStatus use_status = 8; // 使用状态
  api.privilege.v2.PrettyNumberBindStatus bind_status = 9; // 绑定状态
  string remark = 10; //备注
  int64 ctime = 11; //创建时间
  int64 utime = 12; //更新时间
  string creator = 13; //创建人
  string editor = 14; //编辑
  int32 expired = 15; //是否标记为已过期, 定时任务使用, 1-未过期, 2-已过期
}

message BatchGetPrettyNumberReq {
  api.privilege.v2.TargetType target_type = 1; // 归属类型
  repeated int64 target_ids = 2; // uid / room_id
  repeated string show_ids = 3; // 靓号ID
}

message BatchGetPrettyNumberRsp {
  repeated PrettyNumber pretty_numbers = 1;
}

message BatchGetPrettyNumberByIDReq {
  repeated int64 ids = 1;
}

message BatchGetPrettyNumberByIDRsp {
  map<int64, PrettyNumber> pretty_numbers = 1;
}

message BindPrettyNumberReq {
  string seq_id = 1;                              // 幂等ID
  int64 pretty_number_id = 2;                     // 靓号ID
  int64 owner_uid = 10;                           // 归属人
  api.privilege.v2.TargetType target_type = 20;   // 归属类型
  int64 target_id = 21;                           // 归属目标id
  int64 expire_secs = 30;                         // 过期时间戳-秒(-1:永久)
}

message BindPrettyNumberRsp {
  
}
