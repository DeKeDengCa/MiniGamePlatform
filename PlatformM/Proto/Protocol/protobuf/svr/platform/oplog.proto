syntax = "proto3";

package comm.svr.platform.oplog;

option go_package = "gitit.cc/social/protobuf/gencode/svr/platform/pbsoplog";

// 操作记录 MQ 消息, topic: social-oplog
message OplogMessage {
  string anm = 1;                   // 业务名
  string operator_type = 2;         // 操作人类型, 运营: ADMIN, 用户: USER, 外部人员: OUTSIDER
  string operator_id = 3;           // 操作人ID
  string operator_name = 4;         // 操作人名称
  string operator_agent = 5;        // 操作人代理信息, 例如浏览器的 User-Agent
  string operation = 6;             // 操作类型, 由业务与前端自定义, 创建: CREATE, 修改: UPDATE, 移除: DELETE, ...
  int64 operate_at = 7;             // 操作时间, 采用 Unix 时间戳, 精确到秒.
  string operate_args = 8;          // 操作参数, 通常是请求参数的 JSON 字符串.
  int32 operate_edition = 9;        // 操作记录版次, 某个操作目标的特定操作已经有存量的操作记录, 后续操作记录进行升级时通过此字段进行区分, 主要是方便前端根据版本来解析操作记录.
  string target_type = 10;          // 操作目标类型, 业务对操作对象的分类, 例如, 用户: user, 主播: anchor, ...
  repeated string target_ids = 11;  // 操作目标ID, 支持批量操作.
  string target_old = 12;           // 操作目标旧内容
  string target_new = 13;           // 操作目标新内容
  string extension = 50;            // 拓展信息, 采用 JSON 格式方便后续拓展.
}