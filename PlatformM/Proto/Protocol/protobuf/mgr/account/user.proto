// smicro:spath=gitit.cc/social/components-service/social-account/handler-mgr/usermgr
syntax = "proto3";

package comm.mgr.account;

import "protobuf/api/common/common.proto";

option go_package = "gitit.cc/social/protobuf/gencode/mgr/pbmaccount";

service UserMgr {

  // 搜索用户
  rpc SearchUser(SearchUserReq) returns (SearchUserRsp);

  // 拉取所有设备版本
  rpc ListDeviceVersion(ListDeviceVersionReq) returns (ListDeviceVersionRsp);
}


message User {
  int64 uid = 1;          // 用户UID
  string show_uid = 2;    // 用户外显UID
  string nickname = 3;    // 用户昵称
  int32 gender = 4;       // 用户性别
  string avatar = 5;      // 用户头像
  string country = 6;     // 用户国家
  string birthday = 7;    // 用户生日
  string language = 8;    // 客户端语言

  int64 login_at = 20;          // 最近登录时间
  string device_version = 21;   // 最近登录设备和版本
  string client_version = 22;   // 最近登录客户端版本

  int32 status = 40;            // 状态, 1: 正常 2: 封禁

  int64 created_at = 50;    // 注册时间
  int64 updated_at = 51;    // 更新时间
  int64 operated_at = 100;  // 运营操作时间
  string operated_by = 101; // 运营操作人
}

message SearchUserReq {
  scommon.Page page = 1;           // 分页参数
  scommon.Sorts sorts = 2;         // 排序参数
  string uids = 10;                // 用户ID, 以逗号分隔.
  int64 created_at_start = 11;     // 注册时间开始
  int64 created_at_end = 12;       // 注册时间结束
  string device_version = 13;      // 终端设备
  int64 login_at_start = 14;       // 登录时间开始
  int64 login_at_end = 15;         // 登录时间结束
}

message SearchUserRsp {
  scommon.Page page = 1;           // 分页参数
  repeated User data = 10;         // 用户列表
}

message ListDeviceVersionReq {

}

message ListDeviceVersionRsp {
  repeated string device_versions = 10;
}