syntax = "proto3";

package comm.mgr.guild;

option go_package = "gitit.cc/social/protobuf/gencode/mgr/pbmguild";

// smicro:spath=gitit.cc/social/components-service/social-guild/handler-mgr/guildmgr
service GuildMgr {
  // 批量获取用户公会信息
  rpc BatchGetUserGuild(BatchGetUserGuildReq) returns (BatchGetUserGuildRsp) {}
  // 批量获取公会信息
  rpc BatchGetGuildById(BatchGetGuildByIdReq) returns (BatchGetGuildByIdRsp) {}
  // 批量绑定bd
  rpc BatchBindBd(BatchBindBdReq) returns (BatchBindBdRsp);
}

// 成员角色
enum MemberRole {
  MEMBER_ROLE_NONE = 0;   // 非公会成员
  MEMBER_ROLE_ANCHOR = 1; // 普通主播
  MEMBER_ROLE_BROKER = 2; // 经纪人
  MEMBER_ROLE_OWNER = 3;  // 公会长
}

// 工会信息
message Guild {
  int64 id = 1; // 公会ID
  string name = 2; // 公会名称
  string logo = 3; // 公会LOGO
  string profile = 4; // 公会宣言
  int64 manager_id = 5; // 管理员即运营ID
  string category = 6; // 公会分类
  string grade = 7; // 公会等级
  int64 owner_uid = 8; // 公会长UID
  string owner_name = 9; // 公会长姓名
  string owner_country = 10; // 公会长国家
  string owner_whatsapp = 11; // 公会长 whatsapp
  string owner_mobile = 12; // 公会长手机号
  string owner_email = 13; // 公会长邮箱
  repeated string owner_id_cards = 14; // 公会长身份证照片
  int32 other_app_scale = 15; // 公会长其他 app 主播规模
  repeated string other_app_screenshots = 16; // 公会长其他 app 截图
  bool official = 17; // 是否为官方公会
  bool frozen = 18; // 公会是否已冻结
  int64 frozen_at = 19; // 公会冻结时间
  int64 created_at = 20; // 公会创建时间
  int64 updated_at = 21; // 公会更新时间
  string extra = 22; // 公会拓展信息
}

message UserGuild {
  int64 uid = 1;
  MemberRole role = 2;
  Guild guild = 3;
}

message BatchGetUserGuildReq {
  repeated int64 uids = 10;
}

message BatchGetUserGuildRsp {
  repeated UserGuild user_guilds = 10;
}

message BatchGetGuildByIdReq {
  repeated int64 guild_ids = 10;
}

message BatchGetGuildByIdRsp {
  map<int64, Guild> guilds = 10;
}

message BatchBindBdReq {
  repeated int64 guild_ids = 1; // 公会ID列表
  int64 bd_id = 2; // bd ID
}

message BatchBindBdRsp {
}