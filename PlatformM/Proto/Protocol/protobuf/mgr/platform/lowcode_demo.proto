syntax = "proto3";

package comm.mgr.platform.lowcode;

import "protobuf/api/common/common.proto";

option go_package = "gitit.cc/social/components-service/social-platform/proto/pbmlowcode";

// 低代码平台Demo管理接口
// smicro:spath=gitit.cc/social/components-service/social-platform/biz/lowcode/handlermgr
service LowcodeDemoMgr {

    rpc CreateDemo(CreateDemoReq) returns (CreateDemoRsp);

    rpc UpdateDemo(UpdateDemoReq) returns (UpdateDemoRsp);

    rpc DeleteDemo(DeleteDemoReq) returns (DeleteDemoRsp);

    rpc SearchDemo(SearchDemoReq) returns (SearchDemoRsp);

    // 下拉框数据源
    rpc GetDemoSelector(GetDemoSelectorReq) returns (GetDemoSelectorRsp);

    // 自定义单个操作
    rpc SingleOperateDemo(SingleOperateDemoReq) returns (SingleOperateDemoRsp);

    // 自定义批量操作
    rpc BatchOperateDemo(BatchOperateDemoReq) returns (BatchOperateDemoRsp);
}

message CreateDemoReq {
    Demo data = 10;         // 默认字段名: data
}

message CreateDemoRsp {
}

message UpdateDemoReq {
    Demo demo = 10;         // 自定义字段名: demo
}

message UpdateDemoRsp {
}

message DeleteDemoReq {
    repeated int64 ids = 10; // 支持批量删除
}

message DeleteDemoRsp {

}

message SearchDemoReq {
    scommon.Page page = 1;

    string string_field = 10;
    repeated string string_fields = 11;

    int64 int_field = 12;
    repeated int64 int_fields = 13;

    float float_field = 14;
    repeated float float_fields = 15;

    bool bool_field = 16;
    repeated bool bool_fields = 17;

    Enum enum_field = 18;
    repeated Enum enum_fields = 19;

    string start_date_field = 20;
    string end_date_field = 21;

    int64 start_date_time_field = 22;
    int64 end_date_time_field = 23;
}

message SearchDemoRsp {
    scommon.Page page = 1;
    repeated Demo datas = 10;
}

// 下拉框选项
message Option {
    string value = 1;
    string name = 2;
}

message GetDemoSelectorReq {
    string foo = 10;
    int64 bar = 11;
}

message GetDemoSelectorRsp {
    repeated Option options = 10;
}

message SingleOperateDemoReq {
    int64 id = 10;

    bool bool_field = 11;   // 自定义参数
}

message SingleOperateDemoRsp {

}

message BatchOperateDemoReq {
    repeated int64 ids = 10;

    bool bool_field = 11;   // 自定义参数
}

message BatchOperateDemoRsp {

}

enum Enum {
    ENUM_NONE = 0;
    ENUM_FOO = 10;
    ENUM_BAR = 20;
    ENUM_BAZ = 30;
    ENUM_QUX = 40;
}

message File {
    string url = 1;
}

message Privilege {
    string type = 1;
    int64 id = 2;
    bool use_time = 3;
}

message Reward {
    Privilege privilege = 1;
    int64 number = 20;
}

message Color {
    string color = 1;
}

message Staff {
    string union_id = 1;
    string name = 2;
    string nick_name = 3;
    string email = 4;
    string user_id = 5;
}

message Demo {
    int64 id = 100;

    // 单值类型
    string string_field = 1;
    int64 int_field = 2;
    float float_field = 3;
    bool bool_field = 4;
    Enum enum_field = 5;
    Demo nest_field = 6;
    string date_field = 7;
    int64 date_time_field = 8;
    File image_field = 9;
    File file_field = 10;
    Reward reward_field = 11;
    Color color_field = 12;
    // 数组类型
    repeated string string_fields = 31;
    repeated int64 int_fields = 32;
    repeated float float_fields = 33;
    repeated bool bool_fields = 34;
    repeated Enum enum_fields = 35;
    repeated Demo nest_fields = 36;
    repeated string date_fields = 37;
    repeated int64 date_time_fields = 38;
    repeated File image_fields = 39;
    repeated File file_fields = 40;
    repeated Reward reward_fields = 41;
    repeated Color color_fields = 42;
}

