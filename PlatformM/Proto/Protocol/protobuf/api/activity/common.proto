syntax = "proto3";

package comm.api.activity;

import "protobuf/api/activity/crank.proto";
import "protobuf/api/adapter/model.proto";
import "protobuf/api/privilege/v2/bag.proto";
import "protobuf/api/common/common-net.proto";
import "protobuf/api/sconfig/options.proto";

option java_package="com.entertain.sns.comm.api.activity";
option go_package = "gitit.cc/social/protobuf/gencode/api/pbactivity";
option swift_prefix="CommApiActivity";

// 活动信息
message ActivityInfo {
  int64 id = 1;                           // 活动ID
  string name = 2;                        // 活动名称
  int64 start_time = 3;                   // 活动开始时间
  int64 end_time = 4;                     // 活动结束时间
  repeated DisplayGift display_gifts = 5; // 展示礼物
  string display_rewards = 14;            // 展示奖励, 是 OMS 序列化好的一份 JSON 字符串, 中台只是纯保存的.
  string remark = 6;                      // 备注
  string status = 7;                      // 配置状态：normal disable del

  string activity_code = 20;              // 活动唯一code, 用于运营和开发沟通.
  string application_code = 21;           // 应用code, 用于记录积木平台的应用标识.

  string cou = 30; // 活动国家编码
  string time_zone = 31; // 活动时区, 服务端根据国家编码返回, 前端不需要填.
}

// 活动展示礼物
message DisplayGift {
  string gift_id = 1;
  string gift_name = 2;
  map<string, string> i18n_gift_name = 3;
  string gift_icon = 4;
  map<string, string> i18n_gift_icon = 5;
  string item_animation = 6; // 奖励配置项动画资源
}

message RankInfo {
  int64 id = 1;                      // 榜单ID
  string remark = 2;                 // 榜单备注
  CycleType cycle = 4;               // 榜单周期
  RankType rank_type = 5;            // 榜单类型
  int32 show_top = 6;                // 上榜数量（top n）
  RankSource source = 7;             // 数据来源
  ScoreType score_type = 9;          // 分数累加类型
  int32 ratio = 10;                  // 分数比例
  string cou = 12;                   // 榜单国家编码（计算时区）
  string time_zone = 16;             // 榜单时区, 服务端根据国家编码返回, 前端不需要填.
  int64 start_time = 13;             // 开始时间
  int64 end_time = 14;               // 结束时间
  repeated int32 valid_periods = 15; // 有效时段列表，对于小时榜则表示每天有效小时列表, 例如: [8, 9, 10, 20, 21, 22] 表示上午/下午的 8/9/10 点才统计.
  map<string, int32> currency_ratio = 17; // 指定币种对应的分数比例, 1: 收礼获得的货币 2: 送礼消耗的货币 3: 币商使用的货币 4: 美金钱包
  repeated string special_gifts = 18;  // 指定礼物ID
  repeated string special_rec_gifts = 19;   // 指定收礼礼物ID
  repeated string gift_sub_categoryids = 20; // 已经选择的子分类
  repeated string rec_gift_subcategoryids = 21; // 已经选择的子分类，收到礼物
  repeated GoodsInfo special_goods = 22; // 指定商品信息

  string status = 25;                // 配置状态：normal disable del
  int32 show_history_period = 26;    // 展示历史榜单周期
  int32 promotion_num = 27;          // 晋级数量

  RankExtend extend = 50;
}

// 商品数量榜类型
enum RankRecGoodsShowType {
  RANK_REC_GOODS_SHOW_TYPE_NONE = 0; // 无需统计
  RANK_REC_GOODS_SHOW_TYPE_LIGHT_UP = 1; // 展示用户收到的商品点亮占比
  RANK_REC_GOODS_SHOW_TYPE_NUM = 2;      // 商品数量
}

message RankExtend {
  // 商品数量榜用
  repeated RankRecGoodsShowType rec_goods_show_types = 30;  // 统计类型
}

// RankType 榜单类型
enum RankType {
  RANK_TYPE_NONE = 0;         // none
  RANK_TYPE_USER = 10;        // 送礼用户榜
  RANK_TYPE_REC_USER = 11;    // 收礼用户榜
  RANK_TYPE_ROOM = 12;        // 房间榜单
  RANK_TYPE_GUILD = 13;       // 公会榜
  RANK_TYPE_FAMILY = 14;      // 家族榜
  RANK_TYPE_CP = 15;          // CP榜
  RANK_TYPE_REC_CP = 16;      // CP收礼榜
  RANK_TYPE_CP_UNIQ = 17;     // 去重CP榜, 这个会有问题，先去掉了
  RANK_TYPE_CP_ANCHOR_USER = 18;          // 主播用户cp榜
  RANK_TYPE_CP_ANCHOR_USER_UNIQ = 19;     // 去重主播用户cp榜


  RANK_TYPE_GAME_USER_BET = 20;// 游戏用户投入榜
  RANK_TYPE_GAME_USER_WIN = 21;// 游戏用户获得榜
  RANK_TYPE_TASK = 22;         // 任务积分榜
  RANK_TYPE_NEW_FANS = 23;     // 新增粉丝榜
  RANK_TYPE_ROOM_ACTIVITY = 24;     // 房间活跃度榜
  RANK_TYPE_LIVE_PROFIT = 25;       // 直播收益榜
  RANK_TYPE_RECHARGE = 26;     // 充值榜
  RANK_TYPE_ANCHOR_PROFIT = 27;   // 主播个人积分收益
  RANK_TYPE_GUILD_PROFIT = 28;    // 公会积分收益
  RANK_TYPE_USER_PROFIT = 29;   // 用户个人收益  lucky：积分，dating：金豆
  RANK_TYPE_USER_CONSUME = 30;  // 用户个人消耗 dating：宝石
  RANK_TYPE_USER_ONLINE_DURATION = 31;      // 用户在线时长
  RANK_TYPE_USER_IN_ROOM_DURATION = 32;     // 在房间内累计时长
  RANK_TYPE_USER_MIC_ON_DURATION = 33;      // 用户上麦时长
  RANK_TYPE_ROOM_GAME_BET = 34;      // 房间游戏用户投入榜
  RANK_TYPE_ROOM_GAME_WIN = 35;      // 房间游戏用户获得榜

  RANK_TYPE_ROOM_OWNER_MIC_DURATION = 36;     // 房主上麦时间
  RANK_TYPE_ROOM_ON_MIC_UNIQ_NUM = 37;        // 房间上麦人数（去重）
  RANK_TYPE_ROOM_OWNER_UNIQ_SENDER = 38;      // 给房主送礼人数（去重）
  RANK_TYPE_ROOM_PROFIT = 39;        // 房间收益榜，目前只统计收礼流水

  RANK_TYPE_SEND_FAMILY = 40;        // 送礼家族榜
  RANK_TYPE_ROOM_REC = 41;           // 房间收礼榜

  RANK_TYPE_ROOM_GAME_PLAYER_NUM = 42;     // 房间游戏人数（去重）

  // 业务特定的榜单类型，其他业务不能复用的部分
  RANK_TYPE_AVG_PAID_LINK_DURATION = 101;    // lucky 单通付费平均时长（主播付费连麦次均时长）
  RANK_TYPE_DATING_ANCHOR_SUPPORT = 102;     // dating 应援榜
  RANK_TYPE_2025_GUILD_MID_YEAR = 103;       // echo 2025年中公会积分赛
  RANK_TYPE_GAME_USER_BET_REBATE = 104;      // 游戏消耗返利金币, 会展示返利金币数,darling专用，
  RANK_TYPE_REC_GOODS = 105;                 // ah\o2 收到商品个数

  RANK_TYPE_CUSTOMIZE_USER = 900;                       // 自定义用户榜
  RANK_TYPE_CUSTOMIZE_USER_CURRENCY = 901;              // 自定义用户榜，需要✖️汇率
}

// RankSource 数据来源
enum RankSource {
  RANK_SOURCE_NONE = 0;        // none
  RANK_SOURCE_SEND_GIFT = 10;  // 送礼
  RANK_SOURCE_GAME_CONSUME = 20;  // 游戏消耗
}

// ScoreType 分数累加类型
enum ScoreType {
  SCORE_TYPE_NONE = 0;         // none
  SCORE_TYPE_SPEND = 10;       // 礼物消耗价值，例如：金币，每个业务币种不同，按业务定义的消耗币种来定义
  SCORE_TYPE_INCOME = 11;      // 礼物收益价值，例如：钻石、宝石，每个业务币种不同，按业务定义的消耗币种来定义
  SCORE_TYPE_GIFT_NUM = 12;    // 按礼物数量累加
  SCORE_TYPE_GIFT_AMOUNT = 13; // 按礼物总额
}

// 榜单周期
enum CycleType {
  CYCLE_TYPE_NONE = 0;              // none
  CYCLE_TYPE_HOUR = 10;             // 小时榜
  CYCLE_TYPE_DAILY = 20;            // 日榜
  CYCLE_TYPE_MONTH = 30;            // 月榜
  CYCLE_TYPE_YEAR = 40;             // 年榜
  CYCLE_TYPE_TOTAL = 50;            // 总榜
  CYCLE_TYPE_WEEKLY_SUNDAY = 60;    // 周榜-周日开始
  CYCLE_TYPE_WEEKLY_Monday = 61;    // 周榜-周一开始
  CYCLE_TYPE_WEEKLY_TUESDAY = 62;   // 周榜-周二开始
  CYCLE_TYPE_WEEKLY_WEDNESDAY = 63; // 周榜-周三开始
  CYCLE_TYPE_WEEKLY_THURSDAY = 64;  // 周榜-周四开始
  CYCLE_TYPE_WEEKLY_FRIDAY = 65;    // 周榜-周五开始
  CYCLE_TYPE_WEEKLY_SATURDAY = 66;  // 周榜-周六开始

  CYCLE_TYPE_DOUBLE_WEEKLY_SUNDAY = 70;    // 双周榜-周日开始
  CYCLE_TYPE_DOUBLE_WEEKLY_Monday = 71;    // 双周榜-周一开始
  CYCLE_TYPE_DOUBLE_WEEKLY_TUESDAY = 72;   // 双周榜-周二开始
  CYCLE_TYPE_DOUBLE_WEEKLY_WEDNESDAY = 73; // 双周榜-周三开始
  CYCLE_TYPE_DOUBLE_WEEKLY_THURSDAY = 74;  // 双周榜-周四开始
  CYCLE_TYPE_DOUBLE_WEEKLY_FRIDAY = 75;    // 双周榜-周五开始
  CYCLE_TYPE_DOUBLE_WEEKLY_SATURDAY = 76;  // 双周榜-周六开始
}

//活动任务配置
message TaskConfig {
  int64 id = 1; // 任务ID
  int64 activity_id = 2; // 活动ID
  repeated string scenes = 3; // 任务场景
  string task_code = 4; // 任务代码
  string task_name = 5; // 任务名称
  int64 start_time = 6; // 开始时间
  int64 end_time = 7; // 结束时间
  TaskCycle task_cycle = 8; // 任务周期
  string cou = 9; // 国家编码(计算时区)
  string to_finish_deeplink = 10; // 去完成任务deeplink
  int32 ver = 11; //版本，1是旧平台，2是新平台
  TaskMode task_mode = 12;//任务模式
  int32 max_complete_times = 13;// 最大可完成次数
  repeated TaskSubConfig sub_configs = 14;// 子任务列表
  repeated TaskH5Config h5_configs = 15;// h5配置列表
  string task_desc = 16;//任务描述
  bool auto_reward = 17; // 自动领奖
  int64 relate_lottery_id = 18; // 关联的抽奖id
  bool disable_take_reward_batch = 19; // 调用领奖的时候需要传个count = 1, 表示不管完成了多少次，只领取一个奖励
  string component_type = 20;     // 前端组件类型
  TaskCycleSettleType cycle_settle = 21; // 周期性结算类型
  int32 sort = 22; // 排序
  int64 task_component_id = 23;  // 前端组件id，仅前端用
  repeated string gift_white_list = 24; // 礼物白名单
  repeated string rec_gift_white_list = 25;       // 收礼礼物白名单
  repeated string gift_sub_categoryids = 26; // 已经选择的子分类
  repeated string rec_gift_subcategoryids = 27; // 已经选择的子分类，收到礼物
  TaskExtendConfig extend_config = 28;
}

message TaskExtendConfig {
  int32 grid_num = 10; // 宫格数
  bool grid_has_reward = 11; // 宫格是否有奖励，前端用
}

// 这个结构是 BatchListTasksWrap 返回的
message TaskExtendInfo {
  // 九宫格模式用
  string cur_grid_task_id = 10; // 当前对应的宫格的ctask任务id, 如果是日历模式表示当前的任务的id，随机模式则是主任务的id
  int32 cur_round = 11;         // 当前轮次
}

enum TaskCycleSettleType {
  TASK_CYCLE_SETTLE_TYPE_NONE = 0; // 不结算
  TASK_CYCLE_SETTLE_TYPE_ONLY_MAX_STAGE = 1; // 只发放最大完成的 stage 奖励
}

//活动任务h5配置
message TaskH5Config {
  int64 id = 10;          // 奖励ID
  int64 activity_id = 11; // 活动ID
  int64 task_id = 12;     // 任务ID
  int32 stage = 13;       // 阶段性任务用
  string icon_close = 14; // 关闭状态宝箱icon
  string icon_open = 15;  // 打开状态宝箱icon
  string icon_received = 16;      // 领取完毕的宝箱icon
  string title = 17;              // 主标题
  string sub_title = 18;          // 副标题
  string extend_json = 19;        // 扩展json
  string grid_num = 20;           // 格子序号，1到9，连线奖励为序号连线，如：1-2-3 ，九宫格任务用
}

//活动任务-子任务配置
message TaskSubConfig {
  int64 id = 1; // 子任务ID
  int64 activity_id = 2; // 活动ID
  int64 task_id = 3; // 任务ID
  TaskType task_type = 5;  // 任务类型
  TaskScoreType task_score_type = 6;  // 分数累加类型
  string task_name = 7; // 任务名称
  int64 task_target_value = 8; // 任务完成目标值
  string to_finish_deeplink = 9; // 完成任务路由
  string extend_json = 10; // 扩展json
  int64 updated_at = 11; // 修改时间
  int32 ver = 12; //版本，1是旧平台，2是新平台
  map<string, int32> currency_ratio = 13; // 指定币种对应的分数比例, 1: 收礼获得的货币 2: 送礼消耗的货币 3: 币商使用的货币 4: 美金钱包
  string task_desc = 14; // 任务描述多语言
  repeated GoodsInfo special_goods = 15; // 指定商品信息
  repeated DisplayGift special_gifts = 16; // 指定礼物信息
  repeated DisplayGift send_special_gifts = 17; // 指定送礼，按配置走
  repeated DisplayGift rec_special_gifts = 18;  // 指定收礼，按配置走
  ButtonH5Config jump_button = 20; // 跳转按钮配置

  TaskSubExtendConfig extend_config = 30;
}

message TaskSubExtendConfig {
  // 格子序号，1到9，连线奖励为序号连线，如：1-2-3 ，九宫格任务用
  string grid_key = 10;
}


message StageTaskExtendInfo {
  repeated int64 target_values = 10; // 阶段目标值
}

enum TaskMode {
  TASK_MODE_NONE = 0;
  TASK_MODE_STAGE = 1; // 阶段任务
  TASK_MODE_CYCLE = 2; // 周期性任务
  TASK_MODE_COMBINATION = 3; // 组合任务
  TASK_MODE_COMBINATION_STAGE = 4; // 组合 + 阶段任务

  // 四、九宫格 相关
  TASK_MODE_GRID_CALENDAR = 10; // 四、九宫格日历模式
  TASK_MODE_GRID_RANDOM = 11;   // 四、九宫格随机模式
  TASK_MODE_GRID_ILLUSTRATIONS = 12; // 四、九宫格图鉴模式
}

// TaskType 任务类型
enum TaskType {
  TASK_TYPE_NONE = 0;        // none

  // 个人维度
  TASK_TYPE_GIFT_SEND_USER = 10;  // 送礼任务
  TASK_TYPE_GIFT_SEND_NUM = 11;   // 送礼次数
  TASK_TYPE_USER_OWN_ROOM_DURATION = 12; // 在自己房间内累计时长
  TASK_TYPE_USER_IN_ROOM_DURATION = 13; // 在房间内累计时长
  TASK_TYPE_USER_ADD_FRIEND = 14; // 添加好友
  TASK_TYPE_USER_SEND_PRIVATE_MESSAGE = 15; // 给好友发送信息
  TASK_TYPE_OPEN_MIC_ON_DURATION = 16;   // 上麦并且开麦时长
  TASK_TYPE_USER_ONLINE_DURATION = 17;   // 用户在线时长
  TASK_TYPE_USER_ONLINE_DAY = 18;        // 用户在线天数
  TASK_TYPE_USER_LIVE_PROFIT = 19;       // 直播收益
  TASK_TYPE_GIFT_REC_USER = 20;   // 收礼任务
  TASK_TYPE_GIFT_REC_NUM = 21;    // 收礼次数
  TASK_TYPE_USER_PROFIT = 22;       // 用户收益
  TASK_TYPE_USER_CONSUME = 23;       // 用户消费
  TASK_TYPE_RECHARGE_AMOUNT = 30;   // 充值金额总数(累计)
  TASK_TYPE_RECHARGE_DAY_SUM = 31;   // 活动期间充值天数
  TASK_TYPE_CONTINUOUS_RECHARGE_DAY = 32;   // 活动期间连续充值天数
  TASK_TYPE_RECHARGE_TIMES = 33;   // 活动期间充值次数
  TASK_TYPE_RECHARGE_SINGLE_AMOUNT= 34;   // 单笔充值
  TASK_TYPE_MIC_ON_DURATION = 40;   // 上麦时长
  TASK_TYPE_ACT_PAGE_VIEW_NUM = 50;   // 活动页进入次数
  TASK_TYPE_USER_FOLLOW_ROOM_NUM = 60;   // 用户关注房间数
  TASK_TYPE_USER_CHECKIN = 61;           // 签到
  TASK_TYPE_LOTTERY_TIMES = 62;          // 抽奖次数
  TASK_TYPE_GOODS_RECEIVE_NUM = 70;      // 收商品数量

  // 房间维度 房主任务
  TASK_TYPE_ROOM_FOLLOW_NUM = 100;   // 房间关注数
  TASK_TYPE_ROOM_NEW_FOLLOW_NUM = 101;   // 房间新增关注数
  TASK_TYPE_ROOM_SPEND_AMOUNT = 102;   // 房间消费金额总数
  TASK_TYPE_ROOM_MIC_ON_DURATION = 103; // 房间上麦总时长
  TASK_TYPE_ROOM_LIVE_DURATION = 104;   // 房间开播时长
  TASK_TYPE_ROOM_EFFECTIVE_ON_MIC_NUM = 105;   // 房间有效上麦人数
  TASK_TYPE_ROOM_GIFT_REC_NUM = 106;   // 房间收礼数量
  TASK_TYPE_ROOM_GIFT_SENDER_NUM = 107;   // 房间送礼人数
  TASK_TYPE_ROOM_EFFECTIVE_CONTINUOUS_ON_MIC_NUM = 108;   // 房间有效连续上麦人数，需要业务传 mic_seq
  TASK_TYPE_ROOM_GIFT_RECEIVER_NUM = 109;   // 房间收礼人数
  TASK_TYPE_ROOM_GIFT_REC = 110;            // 房间收礼金额总数
  TASK_TYPE_ROOM_LIVE_DAY = 111;   // 房间开播天数

  // 游戏维度
  TASK_TYPE_GAME_USER_BET = 200;// 游戏用户投入任务
  TASK_TYPE_GAME_USER_WIN = 201;// 游戏用户获得任务
  TASK_TYPE_GAME_START = 202;   // 游戏开始次数
  TASK_TYPE_GAME_ROUND_USER = 203;          // 游戏局数,用户任务
  TASK_TYPE_GAME_ROUND_ROOM_OWNER = 204;    // 游戏局数,房主任务
  TASK_TYPE_GAME_BET_ROOM_OWNER = 205;      // 房间游戏用户投入任务，房主任务
  TASK_TYPE_GAME_WIN_ROOM_OWNER = 206;      // 房间游戏用户获得任务，房主任务
  TASK_TYPE_GAME_ROOM_PLAYER_NUM = 207;     // 房间游戏人数（去重）

  // pk相关
  TASK_TYPE_PK_OPEN_TIMES = 300;   // PK开启次数
  TASK_TYPE_PK_PLAY_UV = 301;      // PK参与人数（PK开启者领取奖励）
  TASK_TYPE_PK_PLAY_TIMES = 302;   // PK参与次数（PK参与者领取奖励）

  // 业务个性化维度
  TASK_TYPE_BIZ_REACH_ACT_TOTAL_REVENUE_TIMES = 400;         // 活动参与次数与总收入达到要求, 房主获得奖励
  TASK_TYPE_BIZ_REACH_ACT_TOTAL_REVENUE_TIMES_CREATOR = 401; // 活动参与次数与总收入达到要求, 创建者获得奖励


  // 家族相关
  TASK_TYPE_FAMILY_GIFT_SEND = 500;         // 送礼价值任务
  TASK_TYPE_FAMILY_GIFT_SEND_NUM = 501;     // 送礼次数
  TASK_TYPE_FAMILY_GIFT_REC = 502;          // 收礼任务
  TASK_TYPE_FAMILY_GIFT_REC_NUM = 503;      // 收礼次数
  TASK_TYPE_FAMILY_RECHARGE_TIMES = 504;    // 活动期间充值次数
  TASK_TYPE_FAMILY_RECHARGE_AMOUNT = 505;   // 充值金额总数(累计)

  TASK_TYPE_CUSTOMIZE = 999;             // 自定义用户任务
  TASK_TYPE_CUSTOMIZE_CURRENCY = 1000;   // 自定义用户任务，需要✖️汇率，目前只有dating用到
}

// ScoreType 分数累加类型
enum TaskScoreType {
  TASK_SCORE_TYPE_NONE = 0;         // none
  TASK_SCORE_TYPE_SPEND = 10;       // 礼物消耗价值，例如：金币，每个业务币种不同，按业务定义的消耗币种来定义
  TASK_SCORE_TYPE_INCOME = 11;      // 礼物收益价值，例如：钻石、宝石，每个业务币种不同，按业务定义的消耗币种来定义
}

//活动任务奖励配置
message TaskRewardConfig {
  int64 id = 1; // 奖励ID
  int64 activity_id = 2; // 活动ID
  int64 task_id = 3; // 任务ID
  TaskRewardType reward_type = 4; // 奖励类型(2:奖励包)
  string reward_object_json = 5; // 奖励内容，取值有 TaskRewardEmpty、TaskRewardPackage
  string extend_json = 6;// 扩展json
  int32 stage = 7; // 阶段性任务用
  RewardTargetType reward_target_type = 8; // 奖励发放位置

  TaskRewardExtendConfig extend_config = 50;
}

message TaskRewardExtendConfig {
  string grid_num = 10; // 格子序号，1到9，连线奖励为序号连线，如：1-2-3 ，九宫格任务用
}

// 任务周期
enum TaskCycle {
  TASK_CYCLE_TYPE_NONE = 0;              // NONE
  TASK_CYCLE_TYPE_DAILY = 20;            // 日榜
  TASK_CYCLE_TYPE_MONTH = 30;            // 月榜
  TASK_CYCLE_TYPE_TOTAL = 50;            // 总榜
  TASK_CYCLE_TYPE_WEEKLY_SUNDAY = 60;    // 周榜-周日开始
  TASK_CYCLE_TYPE_WEEKLY_MONDAY = 61;    // 周榜-周一开始
  TASK_CYCLE_TYPE_WEEKLY_TUESDAY = 62;   // 周榜-周二开始
  TASK_CYCLE_TYPE_WEEKLY_WEDNESDAY = 63; // 周榜-周三开始
  TASK_CYCLE_TYPE_WEEKLY_THURSDAY = 64;  // 周榜-周四开始
  TASK_CYCLE_TYPE_WEEKLY_FRIDAY = 65;    // 周榜-周五开始
  TASK_CYCLE_TYPE_WEEKLY_SATURDAY = 66;  // 周榜-周六开始
}

// 任务奖励类型
enum TaskRewardType{
  TASK_REWARD_TYPE_NONE = 0;// none
  TASK_REWARD_TYPE_EMPTY = 1;// 空奖励
  TASK_REWARD_TYPE_PACKAGE = 2;// 奖励包
  TASK_REWARD_TYPE_GENERIC = 4;// 通用奖励
  TASK_REWARD_TYPE_RANK_POINTS = 5;// 榜单积分
  TASK_REWARD_TYPE_LOTTERY_TIMES = 6;// 抽奖次数
  TASK_REWARD_TYPE_TASK_SCORE = 7;   // 任务进度
  TASK_REWARD_TYPE_POINTS = 8;       // 活动平台的积分
}

//任务奖励内容-空奖励
message TaskRewardEmpty{
}

//任务奖励内容-奖励包，对应TaskRewardConfig.reward_object_json
message TaskRewardPackage{
  string package_id = 1;//奖励包Id
  comm.api.adapter.RankRewardTargetType target_type = 10; // 默认是用户
}

message PKConfig {
  int64  id = 10;
  int64 activity_id = 11;//活动Id
  string title = 12;
  string cou = 13;                   // 榜单国家编码（计算时区）
  int64 start_time = 14;             // 开始时间
  int64 end_time = 15;               // 结束时间
  PKType pk_type = 16;               // pk 类型
  bool turn_based = 17;              // 回合制，true: 表示按设置的回合时间段结算PK胜负 false: 表示按设置的PK倒计时段结算PK胜负
  bool special_room = 18;            // 是否指定房间
}

enum PKType {
  PK_TYPE_NONE = 0;
  PK_TYPE_GUILD_REC = 1;  // 公会收礼
  PK_TYPE_FAMILY_REC = 2; // 家族收礼
  PK_TYPE_USER_REC = 3;   // 用户收礼
  PK_TYPE_USER = 4;       // 用户送礼
  PK_TYPE_CP_REC = 5;     // CP 收礼
  PK_TYPE_ROOM = 6;       // 房间pk
  PK_TYPE_CP = 7;         // CP 送礼
}

message PKDetail {
  int64 id = 10;
  int64 activity_id = 11;//活动Id
  int64 pk_id = 12;
  repeated PKPlayer players = 13;
  repeated PKRound rounds = 14;
  PKType pk_type = 15;

  int64 rank = 20; // 当前pk组的排名
}

message PKRound {
  int64 start_time = 11;             // 开始时间
  int64 end_time = 12;               // 结束时间
  PKRoundStatus status = 13;         // 状态
  repeated PKPlayer players = 14;    // 参赛用户信息
}

enum PKRoundStatus {
  PK_ROUND_STATUS_NONE = 0;
  PK_ROUND_STATUS_WAITING = 1;//未开始
  PK_ROUND_STATUS_RUNNING = 2;//进行中
  PK_ROUND_STATUS_END = 3;    //已结束
}

message PKPlayer {
  PKPlayerItem item = 10;
  repeated PKPlayerEntity contribute_list = 11; // 贡献榜
  int64 special_room_id = 12;// 指定房间，如果不指定，所有房间都算
  string special_room_show_id = 13;// 指定房间 show_id，如果不指定，所有房间都算
}

message PKPlayerItem {
  string id = 10;
  int64 points = 12;   // 这个是得分的概念，比如3个回合，A用户在第1个回合得分是200，第2个回合得分是500，那么该值为700
  int64 score = 13;    // 这个是比分的概念，比如3个回合，A用户赢了2个回合，那么该值为2
  int32 rank = 14;
  repeated PKPlayerEntity entities = 15;
  PKEntityResult result = 16;
  string show_id = 17;
}

message PKPlayerEntity {
  string id = 10;
  string nick = 11;
  string avatar = 12;
  string show_id = 13;

  PKPlayerEntityExtend extend = 20;
}

// 扩展信息
message PKPlayerEntityExtend {
  // 房间扩展信息
  int64 room_owner_id = 10;
}

enum PKEntityResult {
  PK_ENTITY_RESULT_NONE = 0;
  PK_ENTITY_RESULT_DRAW = 1;//平
  PK_ENTITY_RESULT_WIN = 2;//胜
  PK_ENTITY_RESULT_LOST = 3;//负
}


message LotteryConfig {
  int64 id = 10;
  int64 activity_id = 11;
  string title = 12;
  string cou = 13;
  int64 start_time = 14;
  int64 end_time = 15;
  repeated LotteryPaidRule paid_rules = 16;
  LotteryType lottery_type = 17;
}

message LotteryRewardConfig {
  int64 id = 10;                    // 奖励ID
  int64 activity_id = 11;           // 活动ID
  int64 lottery_id = 12;            // 任务ID
  TaskRewardType reward_type = 13;  // 奖励类型(2:奖励包)
  string reward_object_json = 14;   // 奖励内容
  string extend_json = 15;          // 扩展json
  int32 sort = 16;                  // 排序值，越小越前显示
  string title = 17;                // 奖励自定义标题
  string img = 18;                  // 奖励自定义图片
  bool hide_badge = 19;             // 是否隐藏角标
}

// 付费抽奖信息
message LotteryPaidRule {
  comm.api.adapter.Currency currency = 10; // 货币类型
  int32 amount = 11;                       // 付费金额
  int32 lottery_times = 12;                // 抽奖次数
}

enum LotteryType {
  LOTTERY_TYPE_NONE = 0;
  LOTTERY_TYPE_TASK = 1;  // 任务抽奖
  LOTTERY_TYPE_PAID = 2;  // 付费抽奖，宝石抽奖
  LOTTERY_TYPE_PAID_POINT = 3; // 积分抽奖，目前只有dating用
}

// 中奖记录
message LotteryRecord {
  int64 record_id = 10;
  int64 lottery_id = 11;
  int64 uid = 12;
  string cou = 13;//时区
  repeated LotteryRecordDetail details = 14;
  int64 create_time = 15;
}

message LotteryRecordDetail {
  int64 reward_id = 10;
  TaskRewardType reward_type = 11; // 奖励类型(2:奖励包)
  string reward_object_json = 12;  // 奖励内容
  string extend_json = 13;         // 扩展json
  int32 num = 14;                  // 获得数量
  string title = 15;               // 奖励自定义标题
  string img = 16;                 // 奖励自定义图片
}

// 弹幕信息
message LotteryBarrage {
  int64 uid = 10;
  LotteryRecordDetail detail = 11; // 中奖信息
  string nickname = 12;
  string avatar = 13;
}

// 用户抽奖次数信息
message UserLotteryInfo {
  int64 lottery_id = 10;  // 抽奖id
  int32 times = 11;       // 可抽奖次数
}

message PandantRank {
  crank.Rank rank = 1; // 榜单
  int64 start_time =2; // 榜单开始时间
  int64 end_time =3 ; // 榜单结束时间
  map<string, string> url = 4; //   活动链接
  map<string, string> background_images = 5; // 挂件背景图多语言
  PandantType pandant_type = 6; // 挂件模版
}

// 按钮配置
message ButtonH5Config {
  string text = 1;        // 文案
  string font_color = 2;  // 字体颜色
  int32 font_size = 3;    // 字体大小
  string bg_color = 4;    // 背景颜色
  string bg_image = 5;    // 背景图片
}

enum PandantType {
  PANDANT_TYPE_NONE =0 ;
  PANDANT_TYPE_SINGLE = 1; // 单项模版
  PANDANT_TYPE_CP = 2; // CP模版
  PANDANT_TYPE_PK = 3; // PK模版
  PANDANT_TYPE_RANK = 4; // 排行模版
}

message RoomRecommendConfig {
  int64 id = 10;
  int64 activity_id = 11;
  RoomRecommendDisplayInfo display_info = 12;           // 组件展示对象
}

enum RoomRecommendDisplayInfo {
  ROOM_RECOMMEND_DISPLAY_INFO_NONE = 0;
  ROOM_RECOMMEND_DISPLAY_INFO_ROOM = 1;           // 展示房间信息
  ROOM_RECOMMEND_DISPLAY_INFO_ROOM_OWNER = 2;     // 展示房主信息
}

// 房间信息
message RoomInfo {
  int64 room_id = 10;          // 房间号
  string show_id = 11;         // 房间靓号
  int64 owner_uid = 12;        // 房主
  string room_type = 13;       // 房间类型
  string room_name = 14;        // 房间名称
  string room_title = 15;       // 房间标题
  string cover = 16;           // 房间封面
}

message UserInfo {
  int64 uid = 10;
  string show_uid = 11;
  string nickname = 12;
  string avatar = 13;

  string extend = 100;   // 扩展信息
}

// 时间周期
message TimeRange {
  int64 start_time = 1;
  int64 end_time = 2;
}

// 展示配置
message PresentationInfo {
  int64 id = 10;
  PresentationConfig config = 11;
  repeated PresentationConfigItem pairs = 12;
}

// 展示配置
message PresentationConfig {
  int64 id = 10;
}

message PresentationUserInfo {
  UserInfo user_info = 10;
  RoomInfo room_info = 11;  // 开播或者上麦中的房间信息，没返回说明不在开播或者上麦中
}

message PresentationConfigItem {
  repeated PresentationUserInfo user_info_list = 10; // 用户信息列表
  string title = 11;        // 标题
  string desc = 12;         // 描述
}

// 用户榜单
message UserRank {
  repeated UserRankItem items = 10;
}

// 用户榜单item
message UserRankItem {
  UserInfo user = 1;  // 用户信息
  int32 rank = 2;     // 排名
  int64 score = 3;    // 分数
}

// 榜单主要类型分类
enum RankMajorType {
  RANK_MAJOR_TYPE_NONE = 0;
  RANK_MAJOR_TYPE_USER = 1    [(sconfig.schema.enum) = {name: "User"}];           // 用户榜
  RANK_MAJOR_TYPE_FAMILY = 2  [(sconfig.schema.enum) = {name: "Family"}];         // 家族榜
  RANK_MAJOR_TYPE_GUILD = 3   [(sconfig.schema.enum) = {name: "Guild"}];          // 公会榜
  RANK_MAJOR_TYPE_ROOM = 4    [(sconfig.schema.enum) = {name: "Room"}];           // 房间榜
  RANK_MAJOR_TYPE_USER_GROUP = 5 [(sconfig.schema.enum) = {name: "UserGroup"}];   // 用户组榜， 比如cp榜单
}

message UserInfoExtend {
  int32 age = 10; // 年龄
  scommon.Gender gender = 11; // 性别
  .api.privilege.v2.UsingPrivilege using_privilege = 12; // 背包资源
  int64 wealth_level = 13;    // 财富等级
  int64 wealth_value = 14;    // 财富值
  map<string,string> wealth_img = 15;     // 财富等级 图片，语言-》图片
  int64 charm_level = 16;     // 魅力等级
  int64 charm_value = 17;     // 魅力值
  map<string,string> charm_img = 18;      // 魅力等级 图片，语言-》图片
  int64 uid = 19;
  int64 reward_num = 20;       // 瓜分得到的奖励数量

  comm.api.adapter.FamilyRoleType family_role_type = 21; // 家族身份
  float contribute_ratio = 22;  // 贡献比, 任务贡献榜用
}

message RoomInfoExtend {
  int64 room_owner_uid = 10;    // 房主uid
  string room_owner_nick = 11;  // 房主昵称
  repeated comm.api.adapter.RoomTag room_tags = 12;
  int64 room_id = 13;
  int64 reward_num = 14;       // 瓜分得到的奖励数量
}

message FamilyInfoExtend {
  int64 family_id = 10;
  int64 reward_num = 11;       // 瓜分得到的奖励数量
}

message RankItemExtend {
  int64 score_gap = 10;        // 跟上一名分数差

  // 商品榜用
  float goodsLightUpPercent = 20; // 商品点亮占比
  int64 goodsReceiveTotal = 21;   // 收到商品总数
}

message GoodsEntityExtend {  // crank 商品信息 entity 的extend
  GoodsInfo goods_info = 10;
}

// 奖励配置项
message RewardItem {
  string item_id = 10; // 奖励配置项ID, 为了通用这里采用字符串形式, 例如礼物ID, 头像框ID, 房间背景ID, ...
  string item_name = 11; // 奖励配置项名称, 例如: 礼物的名称 / 头像框的名称. 这是缺省名称, 如果 oms 需要国际化显示则需要提供 i18n_category_name 字段.
  map<string, string> i18n_item_name = 12; // 国家化的奖励配置项名称, key 的取值有 zh / en / ar / tr ...
  string item_icon = 13; // 奖励配置项图标, 例如: 礼物的图标 / 头像框的图标. 这是缺省图标, 如果 oms 需要国际化显示则需要提供 i18n_category_icon 字段.
  map<string, string> i18n_item_icon = 14; // 国家化的奖励配置项图标, key 的取值有 zh / en / ar / tr ...
  string item_animation = 15; // 奖励配置项动画资源
  string reward_sub_type = 16; // 子类型,具体业务决定, 对应 goods的 goods_type \ badge 的 badge_type \ gift 的 gift_type
  string expand = 17; // 拓展信息, 应当设计成一个 JSON 便于后续拓展.
  repeated string sub_category_ids = 18; // 根据子分类的id来查
}


// 奖池计算类型
enum PrizePoolCalType {
  PRIZE_POOL_CAL_TYPE_NONE = 0;
  PRIZE_POOL_CAL_TYPE_FIX = 1;    // 固定类型
  PRIZE_POOL_CAL_TYPE_RATIO = 2;  // 按照比例
}

// 奖池瓜分权重类型
enum PrizePoolWeightType {
  PRIZE_POOL_WEIGHT_TYPE_NONE = 0;
  PRIZE_POOL_WEIGHT_TYPE_FIX = 1;    // 固定类型：榜单排名，配置topN或者topN-topM对应多少权重
  PRIZE_POOL_WEIGHT_TYPE_RATIO = 2;  // 按照比例：榜单分数段，榜单分数>=XX分 权重
  PRIZE_POOL_WEIGHT_TYPE_SCORE = 3;  // 按照榜单分数：无需设置权重
}

message PrizePoolWeight {
  int64 min = 10;         // 最小值，如果是固定类型，则对应最小榜单排名，如果是按照比例类型，则对应最小榜单分数，包含这个值
  int64 max = 11;         // 最大值，如果是固定类型，则对应最大榜单排名，如果是按照比例类型，则对应最大榜单分数，不包含这个值
  int64 weight = 12;      // 权重值
}

// 奖池配置
message PrizePoolConfig {
  int64 id = 10;
  int64 activity_id = 11;
  PrizePoolCalType cal_type = 12;                       // 奖池累加类型
  bool auto_reward = 13;                                // true：自动发奖，false：运营自己导出，然后发奖
  string reward_category_key = 14;                      // 奖励配置项key, 对应 common reward, 只支持发放个数类型的奖励
  string reward_item_id = 15;                           // 奖励配置项ID, 对应 common reward, 只支持发放个数类型的奖励
  int64 min_rank_score = 16;                            // 最小榜单分
  int64 max_pool_num = 17;                              // 最大奖池数量
  PrizePoolWeightType weight_type = 18;                 // 奖池瓜分权重类型
  repeated PrizePoolWeight weight_config_list = 19;     // 奖池瓜分权重列表,json 存数据库
  int64 relate_rank_id = 20;                            // 关联的榜单id
  int64 start_time = 21;                                // 开始时间
  int64 end_time = 22;                                  // 结束时间
  CycleType cycle = 23;                                 // 周期
  int64 cur_pool_num = 24;                              // 当前奖池数量
  float pool_ratio = 25;                                // 比例值，奖池分数：所有上榜用户的榜单总分*比例值
  int64 prize_rank_score_limit = 26;                    // 瓜分奖池限制，用户榜单分数大于它，才可以参加奖池瓜分

  string component_type = 100;                          // 前端组件类型
  string status = 101;                                  // 配置状态：normal disable del
  int64 component_id = 102;                             // 前端组件id，仅前端用
}

// 主体类型分类
enum SubjectType {
  SUBJECT_TYPE_NONE = 0;
  SUBJECT_TYPE_USER = 1    [(sconfig.schema.enum) = {name: "User"}];           // 用户
  SUBJECT_TYPE_FAMILY = 2  [(sconfig.schema.enum) = {name: "Family"}];         // 家族
  SUBJECT_TYPE_GUILD = 3   [(sconfig.schema.enum) = {name: "Guild"}];          // 公会
  SUBJECT_TYPE_ROOM = 4    [(sconfig.schema.enum) = {name: "Room"}];           // 房间
}


// 榜单返利类型
enum RankRebateType {
  RANK_REBATE_TYPE_NONE = 0;
  RANK_REBATE_TYPE_FIX = 1;    // 固定类型：榜单排名，配置topN或者topN-topM对应多少权重
  RANK_REBATE_TYPE_SCORE = 2;  // 按照比例：榜单分数段，榜单分数>=XX分
}

message RankRebateWeight {
  int64 min = 10;         // 最小值，如果是固定类型，则对应最小榜单排名，如果是按照比例类型，则对应最小榜单分数，包含这个值
  int64 max = 11;         // 最大值，如果是固定类型，则对应最大榜单排名，如果是按照比例类型，则对应最大榜单分数，不包含这个值
  float weight = 12;      // 权重值
}

// 奖励发放位置，比adapter 的更细点, 跟oms选项对应
enum RewardTargetType {
  REWARD_TARGET_TYPE_NONE = 0;
  REWARD_TARGET_TYPE_USER = 1;            // 个人背包
  REWARD_TARGET_TYPE_USER_RESOURCE = 2;   // 个人资源管理器
  REWARD_TARGET_TYPE_FAMILY = 3;          // 家族背包
  REWARD_TARGET_TYPE_FAMILY_RESOURCE = 4; // 家族资源管理器
  REWARD_TARGET_TYPE_USER_ROOM = 5;       // 个人房间背包
  REWARD_TARGET_TYPE_FAMILY_ROOM = 6;     // 家族房间背包
  REWARD_TARGET_TYPE_SELECTION = 50;      // 用户自选
}

// RankParaExtend rank参数扩展
message RankParaExtend {
  string room_id = 10;             // me的房间号
  bool keep_id = 11;               // 不用show id替换 id, 目前只有oms 用户榜用到
  bool show_room_owner_nick = 12;  // 显示房主昵称
  bool show_user_privilege = 13;   // 显示用户特权信息
  bool no_entity_query = 14;       // 不填充entity
  bool show_score_gap = 15;        // me返回距离上一名还差xx分
}

// 商品信息
message GoodsInfo {
  int64 id = 10;      // 商品id，消息推送接口只需要推送这个字段即可
  string name = 11;   // 商品名称
  map<string, string> i18n_name = 12; // 国际化商品名称,没有则空
  string thumb = 13;  // 缩略图
  map<string, string> i18n_thumb = 14; // 国际化商品缩略图,没有则空
  string item_animation = 15; // 商品动画

  string expand = 16;           // 扩展信息
  string reward_sub_type = 17;  // 子类型
  repeated string sub_category_ids  = 18; // 子分类
}

enum PointsExchangeType {
  POINTS_EXCHANGE_TYPE_NONE = 0;
  POINTS_EXCHANGE_TYPE_POINTS = 1; // 使用积分兑换
}

// 积分兑换解锁类型
enum PointsExchangeUnlockType {
  POINTS_EXCHANGE_UNLOCK_TYPE_NONE = 0;
  POINTS_EXCHANGE_UNLOCK_TYPE_LIGHTING = 1; // 通过点亮全图解锁
  POINTS_EXCHANGE_UNLOCK_TYPE_TIMES = 2;    // 通过次数解锁
}

enum PointsExchangeRewardDisplayType {
  POINTS_EXCHANGE_REWARD_DISPLAY_TYPE_NONE = 0;
  POINTS_EXCHANGE_REWARD_DISPLAY_TYPE_TILING = 1;   // 平铺
  POINTS_EXCHANGE_REWARD_DISPLAY_TYPE_CAROUSEL = 2; // 轮播
}

// 积分兑换配置
message PointsExchangeConfig {
  int64 id = 10;             // 任务ID
  int64 activity_id = 11;    // 活动ID
  string cou = 12;           // 国家编码(计算时区)
  int64 start_time = 13;     // 开始时间
  int64 end_time = 14;       // 结束时间
  PointsExchangeUnlockType unlock_type = 15;     // 解锁下一个奖池的条件类型
  int64 exchange_times_for_unlock = 16;          // 解锁需要的兑换次数

  int64 component_id = 30;                      // 前端组件id，仅前端用
  string component_type = 31;                   // 前端组件类型，仅前端用

  repeated PointsExchangePoolConfig pool_configs = 100;
}


message PointsExchangePoolConfig {
  int64 id = 10;
  int64 activity_id = 11;   // 活动ID
  int64 exchange_id = 12;   // 兑换ID
  int32 stage = 13;         // 对应奖池1，2，3
  comm.api.activity.PointsExchangeUnlockType unlock_type = 14;     // 解锁下一个奖池的条件类型
  int64 exchange_times_for_unlock = 15;          // 解锁需要的兑换次数
  string desc = 16; // 描述

  repeated PointsExchangeRewardConfig reward_configs = 100;
}

// 积分兑换奖池配置
message PointsExchangeRewardConfig {
  int64 id = 10;
  int64 activity_id = 11;   // 活动ID
  int64 exchange_id = 12;   // 兑换ID
  int32 stage = 13;         // 对应奖池1，2，3
  int64 sort = 14;          // 排序
  PointsExchangeType exchange_type = 15; // 积分兑换类型
  int64 points_need = 16;                 // 所需积分
  int64 points_origin = 17;               // 划线积分

  int64 stock = 30;                // 库存限制
  CycleType stock_cycle = 31;      // 库存限制周期
  int64 limit = 32;                // 每个人次数限制
  CycleType limit_cycle = 33;      // 每个人次数限制周期

  TaskRewardType reward_type = 40; // 奖励类型(2:奖励包)
  string reward_object_json = 41;  // 奖励内容
  string extend_json = 42;         // 奖励扩展json
  PointsExchangeRewardDisplayType reward_display_type = 43; // 奖励显示类型
  int64 currency_total = 44;       // 货币总量
}

// 积分兑换信息
message PointsExchangeInfo {
  int64 exchange_id = 10; // 积分兑换ID

  int64 points = 20;      // 当前剩余积分数
  map<int64, int64> remaining_map = 21;   // 剩余库存，reward_id -》 数量
  map<int64, int64> exchanged_map = 22;   // 已兑换次数，reward_id -》 数量
  repeated int32 enable_stages = 23;     // 可用的奖池 stage
  repeated PointsExchangeUnlockProgress unlock_progresses = 24;      // 奖池解锁的进度
}

message PointsExchangeUnlockProgress {
  int32 stage = 10;
  int64 cur = 11;  // 当前进度值
  int64 need = 12; // 需要的进度值
}

// 积分兑换记录
message PointsExchangeRecord {
  int64 record_id = 10;   // 记录ID
  int64 exchange_id = 11; // 积分兑换ID
  int64 pool_id = 12;              // 奖池id
  int64 reward_id = 13;            // 奖励id
  int64 uid = 14;
  int64 ctime = 15;

  TaskRewardType reward_type = 20; // 奖励类型(2:奖励包)
  string reward_object_json = 21;  // 奖励内容
  string extend_json = 22;         // 扩展json
}

// 房间开播天数-开播方式
enum RoomLiveDayMode {
  ROOM_LIVE_DAY_MODE_NONE = 0;// 不指定
  ROOM_LIVE_DAY_MODE_CONTINUOUS = 1; // 连续开播
  ROOM_LIVE_DAY_MODE_NON_CONTINUOUS = 2; // 不连续开播
}